import{r as o,f as p,j as e,h,i as le,A as Ae,k as Ee,l as De,m as Fe,n as ee,o as Ie,p as _e,q as se,M as ze,s as He,F as ne,t as Oe,v as Ue,w as Le,x as We,e as Ke,a as Ve,b as Ye,u as qe,y as Ge,z as Je,B as te}from"./index-BzKFHMxR.js";import{a as Y}from"./axiosInstance-tbaVc4i5.js";import{F as Qe}from"./Form-D_YP12dB.js";const oe=o.forwardRef(({bsPrefix:s,bg:t="primary",pill:c=!1,text:r,className:d,as:n="span",...N},g)=>{const x=p(s,"badge");return e.jsx(n,{ref:g,...N,className:h(d,x,c&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})});oe.displayName="Badge";const Xe=oe;var O;function ae(s){if((!O&&O!==0||s)&&le){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),O=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return O}const ce=o.forwardRef(({className:s,bsPrefix:t,as:c="div",...r},d)=>(t=p(t,"modal-body"),e.jsx(c,{ref:d,className:h(s,t),...r})));ce.displayName="ModalBody";const Ze=ce,re=o.forwardRef(({bsPrefix:s,className:t,contentClassName:c,centered:r,size:d,fullscreen:n,children:N,scrollable:g,...x},w)=>{s=p(s,"modal");const m=`${s}-dialog`,M=typeof n=="string"?`${s}-fullscreen-${n}`:`${s}-fullscreen`;return e.jsx("div",{...x,ref:w,className:h(m,t,d&&`${s}-${d}`,r&&`${m}-centered`,g&&`${m}-scrollable`,n&&M),children:e.jsx("div",{className:h(`${s}-content`,c),children:N})})});re.displayName="ModalDialog";const de=re,ie=o.forwardRef(({className:s,bsPrefix:t,as:c="div",...r},d)=>(t=p(t,"modal-footer"),e.jsx(c,{ref:d,className:h(s,t),...r})));ie.displayName="ModalFooter";const Pe=ie,me=o.forwardRef(({bsPrefix:s,className:t,closeLabel:c="Close",closeButton:r=!1,...d},n)=>(s=p(s,"modal-header"),e.jsx(Ae,{ref:n,...d,className:h(t,s),closeLabel:c,closeButton:r})));me.displayName="ModalHeader";const es=me,ss=Ee("h4"),ue=o.forwardRef(({className:s,bsPrefix:t,as:c=ss,...r},d)=>(t=p(t,"modal-title"),e.jsx(c,{ref:d,className:h(s,t),...r})));ue.displayName="ModalTitle";const ts=ue;function as(s){return e.jsx(ne,{...s,timeout:null})}function ls(s){return e.jsx(ne,{...s,timeout:null})}const he=o.forwardRef(({bsPrefix:s,className:t,style:c,dialogClassName:r,contentClassName:d,children:n,dialogAs:N=de,"data-bs-theme":g,"aria-labelledby":x,"aria-describedby":w,"aria-label":m,show:M=!1,animation:u=!0,backdrop:f=!0,keyboard:L=!0,onEscapeKeyDown:A,onShow:j,onHide:y,container:E,autoFocus:D=!0,enforceFocus:F=!0,restoreFocus:I=!0,restoreFocusOptions:_,onEntered:z,onExit:C,onExiting:H,onEnter:S,onEntering:$,onExited:B,backdropClassName:l,manager:i,...b},R)=>{const[ge,xe]=o.useState({}),[fe,q]=o.useState(!1),W=o.useRef(!1),K=o.useRef(!1),k=o.useRef(null),[T,pe]=De(),Ne=Fe(R,pe),G=ee(y),je=Ie();s=p(s,"modal");const ye=o.useMemo(()=>({onHide:G}),[G]);function J(){return i||Oe({isRTL:je})}function Q(a){if(!le)return;const v=J().getScrollbarWidth()>0,P=a.scrollHeight>Le(a).documentElement.clientHeight;xe({paddingRight:v&&!P?ae():void 0,paddingLeft:!v&&P?ae():void 0})}const V=ee(()=>{T&&Q(T.dialog)});_e(()=>{se(window,"resize",V),k.current==null||k.current()});const be=()=>{W.current=!0},ve=a=>{W.current&&T&&a.target===T.dialog&&(K.current=!0),W.current=!1},X=()=>{q(!0),k.current=We(T.dialog,()=>{q(!1)})},we=a=>{a.target===a.currentTarget&&X()},Me=a=>{if(f==="static"){we(a);return}if(K.current||a.target!==a.currentTarget){K.current=!1;return}y==null||y()},Ce=a=>{L?A==null||A(a):(a.preventDefault(),f==="static"&&X())},Se=(a,v)=>{a&&Q(a),S==null||S(a,v)},$e=a=>{k.current==null||k.current(),C==null||C(a)},Be=(a,v)=>{$==null||$(a,v),Ue(window,"resize",V)},Re=a=>{a&&(a.style.display=""),B==null||B(a),se(window,"resize",V)},ke=o.useCallback(a=>e.jsx("div",{...a,className:h(`${s}-backdrop`,l,!u&&"show")}),[u,l,s]),Z={...c,...ge};Z.display="block";const Te=a=>e.jsx("div",{role:"dialog",...a,style:Z,className:h(t,s,fe&&`${s}-static`,!u&&"show"),onClick:f?Me:void 0,onMouseUp:ve,"data-bs-theme":g,"aria-label":m,"aria-labelledby":x,"aria-describedby":w,children:e.jsx(N,{...b,onMouseDown:be,className:r,contentClassName:d,children:n})});return e.jsx(ze.Provider,{value:ye,children:e.jsx(He,{show:M,ref:Ne,backdrop:f,container:E,keyboard:!0,autoFocus:D,enforceFocus:F,restoreFocus:I,restoreFocusOptions:_,onEscapeKeyDown:Ce,onShow:j,onHide:y,onEnter:Se,onEntering:Be,onEntered:z,onExit:$e,onExiting:H,onExited:Re,manager:J(),transition:u?as:void 0,backdropTransition:u?ls:void 0,renderBackdrop:ke,renderDialog:Te})})});he.displayName="Modal";const U=Object.assign(he,{Body:Ze,Header:es,Title:ts,Footer:Pe,Dialog:de,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function rs(){var E,D,F,I,_,z,C,H,S,$,B;const[s,t]=o.useState(null),[c,r]=o.useState(""),d=Ke(),{user:n,handleUser:N}=Ve(),g=Ye(),[x,w]=o.useState(1),m=qe(),[M,u]=o.useState(!1);o.useEffect(()=>{const l=d.id;Y.get(`blog/getbyId/${l}`).then(i=>t(i.data)).catch(i=>console.log(i))},[x]);const f=(l,i)=>{const b=new Date(l);let R=null;return i?R={day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}:R={day:"numeric",month:"long",year:"numeric"},b.toLocaleDateString("en-US",R)},L=l=>{r(l.target.value)},A=()=>{Y.post("comments/create",{text:c,blog:s._id,user:n._id}).then(l=>{console.log(l),w(i=>i+1),r(""),g.showSuccess("Comment has been added.")}).catch(l=>console.log(err))},j=l=>{m(`/blog-search/${l}`)},y=()=>{Y.delete(`blog/delete/${n._id}/${s._id}`).then(l=>{m("/blog-search"),g.showSuccess("Blog and associated comments has been successfully deleted."),console.log(l)}).catch(l=>console.log(l))};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"top-section-area section-gap",role:"top banner",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-between align-items-center d-flex",children:e.jsx("div",{className:"col-lg-8 top-left",children:e.jsx("h1",{className:"text-white mb-20",children:"Blog Details"})})})})}),s?e.jsx("section",{className:"main-detils my-5",role:"Main blog details",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-12 col-md-8 col-lg-8",children:[e.jsx("img",{className:"w-100",src:s.image.url,alt:"Blog Image",style:{maxHeight:"490px"},loading:"lazy"}),e.jsx("h3",{className:"blog-title mt-3",children:s.title}),e.jsxs("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.jsx("p",{className:"category-text mb-0",children:"Category:"}),e.jsx(Xe,{bg:"success",pill:!0,children:s.category})]}),e.jsxs("div",{className:"d-lg-flex justify-content-between mt-3",children:[e.jsxs("p",{className:"user-profile d-flex align-items-center mb-0",children:[e.jsx("img",{src:(D=(E=s==null?void 0:s.user)==null?void 0:E.userImage)==null?void 0:D.url,alt:"",className:"user-img",loading:"lazy"}),e.jsx("p",{className:"user-name mb-0 ms-2",style:{lineHeight:2},children:(F=s==null?void 0:s.user)==null?void 0:F.userName})]}),e.jsxs("p",{className:"date-added d-flex align-items-center mb-0",children:[e.jsx(Ge,{})," ",e.jsx("span",{className:"ms-2",children:f(s==null?void 0:s.createdAt,!1)})]})]}),e.jsx("div",{className:"blog-desc mt-3",dangerouslySetInnerHTML:{__html:s.desc}}),((I=s==null?void 0:s.user)==null?void 0:I._id)===(n==null?void 0:n._id)&&e.jsxs("div",{className:"actions d-flex",children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>m(`/blog-create/${s._id}`),children:"Edit"}),e.jsx("button",{className:"btn btn-outline-danger btn-sm ms-2",onClick:()=>u(!0),children:"Delete"})]}),e.jsx("div",{className:"bottom-wrapper",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 single-b-wrap col-md-12 d-flex align-items-center",children:[e.jsx(Je,{style:{color:"#8490ff x"}})," ",e.jsx("span",{className:"ms-2 comment-text",children:s.comments.length>9?`${(_=s.comments)==null?void 0:_.length} people commented on this post.`:((z=s.comments)==null?void 0:z.length)===0?"No comments yet.":((C=s.comments)==null?void 0:C.length)===1?((H=s.comments[0])==null?void 0:H.user._id)===(n==null?void 0:n._id)?"You commented on this post.":`${($=(S=s.comments[0])==null?void 0:S.user)==null?void 0:$.userName} commented on this.`:`0${(B=s.comments)==null?void 0:B.length} people commented on this post.`})]})})}),e.jsx("section",{className:"comment-sec-area pt-80",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row flex-column",children:[e.jsx("h5",{className:"text-uppercase pb-3",children:s.comments.length>9?`${s.comments.length} Comments`:s.comments.length===0?"No comments yet.":`0${s.comments.length} Comments`}),e.jsxs("div",{className:"d-flex w-100 mb-4 position-relative",children:[e.jsx(Qe.Control,{type:"text",id:"addcomment","aria-describedby":"comment text",placeholder:"Add your thoughts here...",disabled:!n,onChange:L,value:c}),e.jsx("button",{disabled:!n||c==="",className:"btn btn-primary",style:{textWrap:"nowrap",marginLeft:"5px"},onClick:A,children:"Add Comment"})]}),e.jsx("div",{className:"comment-list",children:s.comments.map((l,i)=>{var b;return e.jsx("div",{className:"single-comment justify-content-between d-flex",children:e.jsxs("div",{className:"user justify-content-between d-flex",children:[e.jsx("div",{className:"thumb",children:e.jsx("img",{src:(b=l.user.userImage)==null?void 0:b.url,alt:"",loading:"lazy"})}),e.jsxs("div",{className:"desc",children:[e.jsx("h5",{children:e.jsx("p",{className:"mb-0",children:l.user.userName})}),e.jsx("p",{className:"date mb-0",children:f(l.createdAt,!0)}),e.jsx("p",{className:"comment",children:l.text})]})]})},i)})})]})})})]}),e.jsx("div",{className:"col-sm-12 col-md-4 col-lg-4",children:e.jsxs("ul",{className:"categories list-none",children:[e.jsx("h3",{className:"title",children:"Other Categories"}),e.jsx("li",{className:"cat-list",role:"button",onClick:()=>j("Educative"),children:"Educative"}),e.jsx("li",{className:"cat-list",role:"button",onClick:()=>j("News"),children:"News"}),e.jsx("li",{className:"cat-list",role:"button",onClick:()=>j("Travel"),children:"Travel"}),e.jsx("li",{className:"cat-list",role:"button",onClick:()=>j("Sports"),children:"Sports"})]})})]})})}):s!==null&&e.jsx("p",{className:"d-flex justify-content-center pt-200  fw-bold",style:{fontSize:"30px"},children:"Opps! The post you are looking for is not found"}),e.jsxs(U,{size:"sm",show:M,onHide:()=>u(!1),"aria-labelledby":"example-modal-sizes-title-sm",centered:!0,children:[e.jsx(U.Header,{closeButton:!0,children:e.jsx("p",{className:"mb-0",children:"Delete Blog"})}),e.jsx(U.Body,{children:e.jsx("p",{className:"text-sm",children:"Are you sure to delete?"})}),e.jsxs(U.Footer,{className:"text-center",children:[e.jsx(te,{className:"",size:"sm",variant:"secondary",onClick:()=>u(!1),children:"NO"}),e.jsx(te,{className:"",size:"sm",variant:"danger",onClick:y,children:"YES"})]})]})]})}export{rs as default};
